`timescale 1ns / 1ps

//temporary run as ROM
module InstructionMemory(
    input wire clk,
    input wire rst,
    //input wire	rd,  		              //read enable, active high
    input wire [31:0] addr,              //instruction address, from PC
    output wire[6:0] funct7,
    output wire[2:0] funct3,
    output wire[6:0] Opcode,
    output wire[4:0] rd_addr,     	     // decode out Rd address
    output wire[4:0] rs1_addr,	     // decode out Rs1 address
    output wire[4:0] rs2_addr,	     // decode out Rs2 address
    output reg[31:0] instruction 	//complete instruction
    );
    
reg[31:0] IM[511:0]; //512*4B=2048B
wire[9:0] offset; //11-2

integer i;
initial begin
  for (i=0;i<=511;i=i+1)
    IM[i] = 0;
end


//0x01000000
assign offset=addr[11:0]>>2;

always @(posedge clk,rst) begin
    if(rst==0) begin
//0x0100 0000

IM[0]<=32'h00100593;
IM[1]<=32'h80000637;
IM[2]<=32'h08060613;
IM[3]<=32'h0ff00693;
IM[4]<=32'h00400713;
IM[5]<=32'h001001b7;
IM[6]<=32'h00c00233;
IM[7]<=32'h00000293;
IM[8]<=32'h00300393;
IM[9]<=32'h00000313;
IM[10]<=32'h00400413;
IM[11]<=32'h0001a083;
IM[12]<=32'h00d0f133;
IM[13]<=32'h00222023;
IM[14]<=32'h00e20233;
IM[15]<=32'h0080d093;
IM[16]<=32'h00b30333;
IM[17]<=32'hfe8346e3;
IM[18]<=32'h00e181b3;
IM[19]<=32'h00b282b3;
IM[20]<=32'hfc72cae3;
IM[21]<=32'h00100293;
IM[22]<=32'h00c00393;
IM[23]<=32'h00000313;
IM[24]<=32'h00500433;
IM[25]<=32'h00229493;
IM[26]<=32'h009601b3;
IM[27]<=32'h0001a083;
IM[28]<=32'h00231513;
IM[29]<=32'h00a601b3;
IM[30]<=32'h0001a103;
IM[31]<=32'h0020cc63;
IM[32]<=32'h00208a63;
IM[33]<=32'h00960233;
IM[34]<=32'h00222023;
IM[35]<=32'h00a60233;
IM[36]<=32'h00122023;
IM[37]<=32'h00b30333;
IM[38]<=32'hfc8346e3;
IM[39]<=32'h00b282b3;
IM[40]<=32'hfa72cee3;
IM[41]<=32'h00c00393;
IM[42]<=32'h00000293;
IM[43]<=32'h00229493;
IM[44]<=32'h009601b3;
IM[45]<=32'h0001a083;
IM[46]<=32'h00b282b3;
IM[47]<=32'hfe72c8e3;
IM[48]<=32'h00c001b3;
IM[49]<=32'h0001a083;
IM[50]<=32'h0041a083;
IM[51]<=32'h0081a083;
IM[52]<=32'h00c1a083;
IM[53]<=32'h0101a083;
IM[54]<=32'h0141a083;
IM[55]<=32'h0181a083;
IM[56]<=32'h01c1a083;
IM[57]<=32'h0201a083;
IM[58]<=32'h0241a083;
IM[59]<=32'h0281a083;
IM[60]<=32'h02c1a083;
IM[61]<=32'h00100093;
IM[62]<=32'h00d00f13;
IM[63]<=32'h02000f93;
IM[64]<=32'h01f09813;
IM[65]<=32'h06080893;
IM[66]<=32'h0008a203;
IM[67]<=32'h0048a383;
IM[68]<=32'h00724133;
IM[69]<=32'h01f3f413;
IM[70]<=32'h408f84b3;
IM[71]<=32'h00811a33;
IM[72]<=32'h00915ab3;
IM[73]<=32'h015a61b3;
IM[74]<=32'h00082b03;
IM[75]<=32'h00480813;
IM[76]<=32'h01618233;
IM[77]<=32'h0043c2b3;
IM[78]<=32'h01f27413;
IM[79]<=32'h408f84b3;
IM[80]<=32'h00829a33;
IM[81]<=32'h0092dab3;
IM[82]<=32'h015a6333;
IM[83]<=32'h00082b03;
IM[84]<=32'h00480813;
IM[85]<=32'h016303b3;
IM[86]<=32'h00108093;
IM[87]<=32'hfbe09ae3;
IM[88]<=32'h00100093;
IM[89]<=32'h00400e93;
IM[90]<=32'h41d80833;
IM[91]<=32'h00082b03;
IM[92]<=32'h41638333;
IM[93]<=32'h01f27413;
IM[94]<=32'h408f84b3;
IM[95]<=32'h00931a33;
IM[96]<=32'h00835ab3;
IM[97]<=32'h015a62b3;
IM[98]<=32'h005243b3;
IM[99]<=32'h41d80833;
IM[100]<=32'h00082b03;
IM[101]<=32'h416201b3;
IM[102]<=32'h01f3f413;
IM[103]<=32'h408f84b3;
IM[104]<=32'h00919a33;
IM[105]<=32'h0081dab3;
IM[106]<=32'h015a6133;
IM[107]<=32'h0023c233;
IM[108]<=32'h401f0f33;
IM[109]<=32'hfa1f1ae3;
IM[110]<=32'h0048a423;
IM[111]<=32'h0078a623;
IM[112]<=32'h0088a083;
IM[113]<=32'h00c8a083;
IM[114]<=32'h00100073;
IM[115]<=32'h00000000;
IM[116]<=32'h00000000;
IM[117]<=32'h00000000;
IM[118]<=32'h00000000;
IM[119]<=32'h00000000;
IM[120]<=32'h00000000;
IM[121]<=32'h00000000;
IM[122]<=32'h00000000;
IM[123]<=32'h00000000;
IM[124]<=32'h00000000;
IM[125]<=32'h00000000;
IM[126]<=32'h00000000;
IM[127]<=32'h00000000;
IM[128]<=32'h00000000;
IM[129]<=32'h00000000;
IM[130]<=32'h00000000;
IM[131]<=32'h00000000;
IM[132]<=32'h00000000;
IM[133]<=32'h00000000;
IM[134]<=32'h00000000;
IM[135]<=32'h00000000;
IM[136]<=32'h00000000;
IM[137]<=32'h00000000;
IM[138]<=32'h00000000;
IM[139]<=32'h00000000;
IM[140]<=32'h00000000;
IM[141]<=32'h00000000;
IM[142]<=32'h00000000;
IM[143]<=32'h00000000;
IM[144]<=32'h00000000;
IM[145]<=32'h00000000;
IM[146]<=32'h00000000;
IM[147]<=32'h00000000;
IM[148]<=32'h00000000;
IM[149]<=32'h00000000;
IM[150]<=32'h00000000;
IM[151]<=32'h00000000;
IM[152]<=32'h00000000;
IM[153]<=32'h00000000;
IM[154]<=32'h00000000;
IM[155]<=32'h00000000;
IM[156]<=32'h00000000;
IM[157]<=32'h00000000;
IM[158]<=32'h00000000;
IM[159]<=32'h00000000;
IM[160]<=32'h00000000;
IM[161]<=32'h00000000;
IM[162]<=32'h00000000;
IM[163]<=32'h00000000;
IM[164]<=32'h00000000;
IM[165]<=32'h00000000;
IM[166]<=32'h00000000;
IM[167]<=32'h00000000;
IM[168]<=32'h00000000;
IM[169]<=32'h00000000;
IM[170]<=32'h00000000;
IM[171]<=32'h00000000;
IM[172]<=32'h00000000;
IM[173]<=32'h00000000;
IM[174]<=32'h00000000;
IM[175]<=32'h00000000;
IM[176]<=32'h00000000;
IM[177]<=32'h00000000;
IM[178]<=32'h00000000;
IM[179]<=32'h00000000;
IM[180]<=32'h00000000;
IM[181]<=32'h00000000;
IM[182]<=32'h00000000;
IM[183]<=32'h00000000;
IM[184]<=32'h00000000;
IM[185]<=32'h00000000;
IM[186]<=32'h00000000;
IM[187]<=32'h00000000;
IM[188]<=32'h00000000;
IM[189]<=32'h00000000;
IM[190]<=32'h00000000;
IM[191]<=32'h00000000;
IM[192]<=32'h00000000;
IM[193]<=32'h00000000;
IM[194]<=32'h00000000;
IM[195]<=32'h00000000;
IM[196]<=32'h00000000;
IM[197]<=32'h00000000;
IM[198]<=32'h00000000;
IM[199]<=32'h00000000;
IM[200]<=32'h00000000;
IM[201]<=32'h00000000;
IM[202]<=32'h00000000;
IM[203]<=32'h00000000;
IM[204]<=32'h00000000;
IM[205]<=32'h00000000;
IM[206]<=32'h00000000;
IM[207]<=32'h00000000;
IM[208]<=32'h00000000;
IM[209]<=32'h00000000;
IM[210]<=32'h00000000;
IM[211]<=32'h00000000;
IM[212]<=32'h00000000;
IM[213]<=32'h00000000;
IM[214]<=32'h00000000;
IM[215]<=32'h00000000;
IM[216]<=32'h00000000;
IM[217]<=32'h00000000;
IM[218]<=32'h00000000;
IM[219]<=32'h00000000;
IM[220]<=32'h00000000;
IM[221]<=32'h00000000;
IM[222]<=32'h00000000;
IM[223]<=32'h00000000;
IM[224]<=32'h00000000;
IM[225]<=32'h00000000;
IM[226]<=32'h00000000;
IM[227]<=32'h00000000;
IM[228]<=32'h00000000;
IM[229]<=32'h00000000;
IM[230]<=32'h00000000;
IM[231]<=32'h00000000;
IM[232]<=32'h00000000;
IM[233]<=32'h00000000;
IM[234]<=32'h00000000;
IM[235]<=32'h00000000;
IM[236]<=32'h00000000;
IM[237]<=32'h00000000;
IM[238]<=32'h00000000;
IM[239]<=32'h00000000;
IM[240]<=32'h00000000;
IM[241]<=32'h00000000;
IM[242]<=32'h00000000;
IM[243]<=32'h00000000;
IM[244]<=32'h00000000;
IM[245]<=32'h00000000;
IM[246]<=32'h00000000;
IM[247]<=32'h00000000;
IM[248]<=32'h00000000;
IM[249]<=32'h00000000;
IM[250]<=32'h00000000;
IM[251]<=32'h00000000;
IM[252]<=32'h00000000;
IM[253]<=32'h00000000;
IM[254]<=32'h00000000;
IM[255]<=32'h00000000;
IM[256]<=32'h00000000;
IM[257]<=32'h00000000;
IM[258]<=32'h00000000;
IM[259]<=32'h00000000;
IM[260]<=32'h00000000;
IM[261]<=32'h00000000;
IM[262]<=32'h00000000;
IM[263]<=32'h00000000;
IM[264]<=32'h00000000;
IM[265]<=32'h00000000;
IM[266]<=32'h00000000;
IM[267]<=32'h00000000;
IM[268]<=32'h00000000;
IM[269]<=32'h00000000;
IM[270]<=32'h00000000;
IM[271]<=32'h00000000;
IM[272]<=32'h00000000;
IM[273]<=32'h00000000;
IM[274]<=32'h00000000;
IM[275]<=32'h00000000;
IM[276]<=32'h00000000;
IM[277]<=32'h00000000;
IM[278]<=32'h00000000;
IM[279]<=32'h00000000;
IM[280]<=32'h00000000;
IM[281]<=32'h00000000;
IM[282]<=32'h00000000;
IM[283]<=32'h00000000;
IM[284]<=32'h00000000;
IM[285]<=32'h00000000;
IM[286]<=32'h00000000;
IM[287]<=32'h00000000;
IM[288]<=32'h00000000;
IM[289]<=32'h00000000;
IM[290]<=32'h00000000;
IM[291]<=32'h00000000;
IM[292]<=32'h00000000;
IM[293]<=32'h00000000;
IM[294]<=32'h00000000;
IM[295]<=32'h00000000;
IM[296]<=32'h00000000;
IM[297]<=32'h00000000;
IM[298]<=32'h00000000;
IM[299]<=32'h00000000;
IM[300]<=32'h00000000;
IM[301]<=32'h00000000;
IM[302]<=32'h00000000;
IM[303]<=32'h00000000;
IM[304]<=32'h00000000;
IM[305]<=32'h00000000;
IM[306]<=32'h00000000;
IM[307]<=32'h00000000;
IM[308]<=32'h00000000;
IM[309]<=32'h00000000;
IM[310]<=32'h00000000;
IM[311]<=32'h00000000;
IM[312]<=32'h00000000;
IM[313]<=32'h00000000;
IM[314]<=32'h00000000;
IM[315]<=32'h00000000;
IM[316]<=32'h00000000;
IM[317]<=32'h00000000;
IM[318]<=32'h00000000;
IM[319]<=32'h00000000;
IM[320]<=32'h00000000;
IM[321]<=32'h00000000;
IM[322]<=32'h00000000;
IM[323]<=32'h00000000;
IM[324]<=32'h00000000;
IM[325]<=32'h00000000;
IM[326]<=32'h00000000;
IM[327]<=32'h00000000;
IM[328]<=32'h00000000;
IM[329]<=32'h00000000;
IM[330]<=32'h00000000;
IM[331]<=32'h00000000;
IM[332]<=32'h00000000;
IM[333]<=32'h00000000;
IM[334]<=32'h00000000;
IM[335]<=32'h00000000;
IM[336]<=32'h00000000;
IM[337]<=32'h00000000;
IM[338]<=32'h00000000;
IM[339]<=32'h00000000;
IM[340]<=32'h00000000;
IM[341]<=32'h00000000;
IM[342]<=32'h00000000;
IM[343]<=32'h00000000;
IM[344]<=32'h00000000;
IM[345]<=32'h00000000;
IM[346]<=32'h00000000;
IM[347]<=32'h00000000;
IM[348]<=32'h00000000;
IM[349]<=32'h00000000;
IM[350]<=32'h00000000;
IM[351]<=32'h00000000;
IM[352]<=32'h00000000;
IM[353]<=32'h00000000;
IM[354]<=32'h00000000;
IM[355]<=32'h00000000;
IM[356]<=32'h00000000;
IM[357]<=32'h00000000;
IM[358]<=32'h00000000;
IM[359]<=32'h00000000;
IM[360]<=32'h00000000;
IM[361]<=32'h00000000;
IM[362]<=32'h00000000;
IM[363]<=32'h00000000;
IM[364]<=32'h00000000;
IM[365]<=32'h00000000;
IM[366]<=32'h00000000;
IM[367]<=32'h00000000;
IM[368]<=32'h00000000;
IM[369]<=32'h00000000;
IM[370]<=32'h00000000;
IM[371]<=32'h00000000;
IM[372]<=32'h00000000;
IM[373]<=32'h00000000;
IM[374]<=32'h00000000;
IM[375]<=32'h00000000;
IM[376]<=32'h00000000;
IM[377]<=32'h00000000;
IM[378]<=32'h00000000;
IM[379]<=32'h00000000;
IM[380]<=32'h00000000;
IM[381]<=32'h00000000;
IM[382]<=32'h00000000;
IM[383]<=32'h00000000;
IM[384]<=32'h00000000;
IM[385]<=32'h00000000;
IM[386]<=32'h00000000;
IM[387]<=32'h00000000;
IM[388]<=32'h00000000;
IM[389]<=32'h00000000;
IM[390]<=32'h00000000;
IM[391]<=32'h00000000;
IM[392]<=32'h00000000;
IM[393]<=32'h00000000;
IM[394]<=32'h00000000;
IM[395]<=32'h00000000;
IM[396]<=32'h00000000;
IM[397]<=32'h00000000;
IM[398]<=32'h00000000;
IM[399]<=32'h00000000;
IM[400]<=32'h00000000;
IM[401]<=32'h00000000;
IM[402]<=32'h00000000;
IM[403]<=32'h00000000;
IM[404]<=32'h00000000;
IM[405]<=32'h00000000;
IM[406]<=32'h00000000;
IM[407]<=32'h00000000;
IM[408]<=32'h00000000;
IM[409]<=32'h00000000;
IM[410]<=32'h00000000;
IM[411]<=32'h00000000;
IM[412]<=32'h00000000;
IM[413]<=32'h00000000;
IM[414]<=32'h00000000;
IM[415]<=32'h00000000;
IM[416]<=32'h00000000;
IM[417]<=32'h00000000;
IM[418]<=32'h00000000;
IM[419]<=32'h00000000;
IM[420]<=32'h00000000;
IM[421]<=32'h00000000;
IM[422]<=32'h00000000;
IM[423]<=32'h00000000;
IM[424]<=32'h00000000;
IM[425]<=32'h00000000;
IM[426]<=32'h00000000;
IM[427]<=32'h00000000;
IM[428]<=32'h00000000;
IM[429]<=32'h00000000;
IM[430]<=32'h00000000;
IM[431]<=32'h00000000;
IM[432]<=32'h00000000;
IM[433]<=32'h00000000;
IM[434]<=32'h00000000;
IM[435]<=32'h00000000;
IM[436]<=32'h00000000;
IM[437]<=32'h00000000;
IM[438]<=32'h00000000;
IM[439]<=32'h00000000;
IM[440]<=32'h00000000;
IM[441]<=32'h00000000;
IM[442]<=32'h00000000;
IM[443]<=32'h00000000;
IM[444]<=32'h00000000;
IM[445]<=32'h00000000;
IM[446]<=32'h00000000;
IM[447]<=32'h00000000;
IM[448]<=32'h00000000;
IM[449]<=32'h00000000;
IM[450]<=32'h00000000;
IM[451]<=32'h00000000;
IM[452]<=32'h00000000;
IM[453]<=32'h00000000;
IM[454]<=32'h00000000;
IM[455]<=32'h00000000;
IM[456]<=32'h00000000;
IM[457]<=32'h00000000;
IM[458]<=32'h00000000;
IM[459]<=32'h00000000;
IM[460]<=32'h00000000;
IM[461]<=32'h00000000;
IM[462]<=32'h00000000;
IM[463]<=32'h00000000;
IM[464]<=32'h00000000;
IM[465]<=32'h00000000;
IM[466]<=32'h00000000;
IM[467]<=32'h00000000;
IM[468]<=32'h00000000;
IM[469]<=32'h00000000;
IM[470]<=32'h00000000;
IM[471]<=32'h00000000;
IM[472]<=32'h00000000;
IM[473]<=32'h00000000;
IM[474]<=32'h00000000;
IM[475]<=32'h00000000;
IM[476]<=32'h00000000;
IM[477]<=32'h00000000;
IM[478]<=32'h00000000;
IM[479]<=32'h00000000;
IM[480]<=32'h00000000;
IM[481]<=32'h00000000;
IM[482]<=32'h00000000;
IM[483]<=32'h00000000;
IM[484]<=32'h00000000;
IM[485]<=32'h00000000;
IM[486]<=32'h00000000;
IM[487]<=32'h00000000;
IM[488]<=32'h00000000;
IM[489]<=32'h00000000;
IM[490]<=32'h00000000;
IM[491]<=32'h00000000;
IM[492]<=32'h00000000;
IM[493]<=32'h00000000;
IM[494]<=32'h00000000;
IM[495]<=32'h00000000;
IM[496]<=32'h00000000;
IM[497]<=32'h00000000;
IM[498]<=32'h00000000;
IM[499]<=32'h00000000;
IM[500]<=32'h00000000;
IM[501]<=32'h00000000;
IM[502]<=32'h00000000;
IM[503]<=32'h00000000;
IM[504]<=32'h00000000;
IM[505]<=32'h00000000;
IM[506]<=32'h00000000;
IM[507]<=32'h00000000;
IM[508]<=32'h00000000;
IM[509]<=32'h00000000;
IM[510]<=32'h00000000;
IM[511]<=32'h00000000;

    end
    else begin 
        instruction <= IM[offset];
    end
end

assign rd_addr=instruction[11:7];     	 
assign rs1_addr=instruction[19:15];   
assign rs2_addr=instruction[24:20];
assign funct7=instruction[31:25];
assign funct3=instruction[14:12];
assign Opcode=instruction[6:0];
    
endmodule
